/**
                                    ‚£Ä‚°†‚¢§‚°Ä          
                                 ‚¢Ä‚°¥‚†ü‚†É  ‚†ô‚£Ñ         
                                ‚£†‚†ã      ‚†ò‚£Ü        
                              ‚¢†‚†æ‚¢õ‚†í       ‚¢∏‚°Ü       
                              ‚£ø‚£∂‚£Ñ‚°à‚†ì‚¢Ñ‚††‚°Ä   ‚£Ñ‚£∑       
                             ‚¢Ä‚£ø‚£∑ ‚†à‚†±‚°Ñ‚†ë‚£å‚†Ü  ‚°ú‚¢ª       
                             ‚¢∏‚£ø‚°ø‚†≥‚°Ü‚†ê‚¢ø‚£Ü‚†à‚¢ø  ‚°á‚†ò‚°Ü      
                              ‚¢ø‚£ø‚£∑‚°á  ‚†à‚¢Ü‚†à‚†Ü‚¢∏  ‚¢£      
                              ‚†ò‚£ø‚£ø‚£ø‚£ß  ‚†à‚¢Ç ‚°á  ‚¢®‚†ì‚£Ñ    
                               ‚£∏‚£ø‚£ø‚£ø‚£¶‚£§‚†ñ‚°è‚°∏ ‚£Ä‚°¥‚†ã ‚†à‚†¢‚°Ä  
                             ‚¢†‚£æ‚†Å‚£π‚£ø‚£ø‚£ø‚£∑‚£æ‚†Ω‚†ñ‚†ä‚¢π‚£Ä‚†Ñ   ‚†à‚¢£‚°Ä
                             ‚°ü‚£á‚£∞‚¢´‚¢ª‚¢â‚†â ‚£ø‚°Ü  ‚°∏‚°è      ‚¢á
                            ‚¢®‚°á‚°á‚†à‚¢∏‚¢∏‚¢∏  ‚°á‚°á  ‚†Å‚†ª‚°Ñ‚°†‚†Ç   ‚†ò
‚¢§‚£Ñ                         ‚¢†‚†õ‚†ì‚°á ‚†∏‚°Ü‚¢∏ ‚¢†‚£ø    ‚£∞‚£ø‚£µ‚°Ü    
‚†à‚¢ª‚£∑‚£¶‚£Ä                     ‚£†‚°ø‚£¶‚£Ä‚°á ‚¢ß‚°á  ‚¢∫‚°ü   ‚¢∞‚†â‚£∞‚†ü‚†ä‚£†‚†Ç ‚°∏
  ‚¢ª‚£ø‚£ø‚£∑‚£¶‚£Ä                 ‚£†‚¢ß‚°ô‚†∫‚†ø‚°á ‚†ò‚†á  ‚¢∏‚£ß  ‚¢†‚†É‚£æ‚£å‚†â‚†©‚†≠‚†ç‚£â‚°á
   ‚†ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£¶‚£Ä            ‚£†‚£û‚£ã ‚†à ‚°≥‚£ß     ‚¢∏‚°è  ‚°û‚¢∞‚†â‚†â‚†â‚†â‚†â‚†ì‚¢ª‚†É
    ‚†π‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚°Ñ  ‚¢Ä‚£Ä‚††‚†§‚£§‚£§‚†§‚†û‚†ì‚¢†‚†à‚°Ü ‚¢£‚£∏‚£æ‚†Ü     ‚¢Ä‚£Ä‚°º‚†Å‚°ø‚†à‚£â‚£â‚£í‚°í‚†¢‚°º 
     ‚†ò‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£é‚£Ω‚£∂‚£§‚°∂‚¢ã‚£§‚†É‚£†‚°¶‚¢Ä‚°º‚¢¶‚£æ‚°§‚†ö‚£ü‚£Å‚£Ä‚£Ä‚£Ä‚£Ä ‚£Ä‚£à‚£Ä‚£†‚£æ‚£Ö ‚†ë‚†Ç‚†§‚†å‚£©‚°á 
      ‚†ò‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°Å‚£∫‚¢Å‚£û‚£â‚°¥‚†ü‚°Ä   ‚†Å‚†∏‚°Ö ‚†à‚¢∑‚†à‚†è‚†ô ‚¢π‚°õ ‚¢â   ‚£Ä‚£Ä‚£º‚°á 
        ‚†à‚†ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£Ω‚£ø‚°ü‚¢°‚†ñ‚£°‚°¥‚†Ç‚£Ä‚£Ä‚£Ä‚£∞‚£Å‚£Ä‚£Ä‚£∏    ‚†à‚†Å  ‚†à ‚£†‚†ú‚†ã‚£†‚†Å 
           ‚†ô‚¢ø‚£ø‚£ø‚£ø‚°ü‚¢ø‚£ø‚£ø‚£∑‚°ü‚¢ã‚£•‚£ñ‚£â ‚†à‚¢Å‚°Ä‚†§‚†ö‚†ø‚£∑‚°¶‚¢Ä‚£†‚£Ä‚†¢‚£Ñ‚£Ä‚°†‚†î‚†ã‚†Å ‚£º‚†É  
             ‚†à‚†ª‚£ø‚£ø‚°Ñ‚†à‚†ª‚£ø‚£ø‚¢ø‚£õ‚£©‚†§‚†í‚†â‚†Å     ‚†â‚†í‚¢§‚°Ä‚†â‚†Å     ‚¢Ä‚°ø   
               ‚†à‚†ô‚¢ø‚£§‚£§‚†¥‚†ü‚†ã‚†â             ‚†à‚†ë‚†§     ‚¢©‚†á   
                  ‚†à                               


**/
const { cmd } = require('../command');
const axios = require('axios');

cmd({
  pattern: "xvideo",
  alias: ["xv", "xvideos"],
  react: "üîû",
  desc: "Search & download Xvideos video",
  category: "fun",
  use: ".xvideo <search term>",
  filename: __filename
}, async (conn, mek, m, { text }) => {
  try {
    if (!text) return m.reply("üîç *Please enter a search term!*\n\n_Example:_ .xvideo Indian girl");

    // üïµÔ∏è Search request
    const search = await axios.get(`https://api.nekolabs.my.id/discovery/xvideos/search?q=${encodeURIComponent(text)}`);
    if (!search.data.success || !search.data.result?.length) return m.reply("‚ö†Ô∏è *No results found!* üò¢");

    const video = search.data.result[0]; // get first result
    const { title, artist, duration, cover, url } = video;

    // üß© Download request
    const dl = await axios.get(`https://api.nekolabs.my.id/downloader/xvideos?url=${encodeURIComponent(url)}`);
    if (!dl.data.success) return m.reply("‚ö†Ô∏è *Error while fetching video!* üò¢");

    const videoUrl = dl.data.result.videos.high || dl.data.result.videos.low;
    const thumb = dl.data.result.thumb;

    // üé¨ Send video reply (XNXX style)
    await conn.sendMessage(m.chat, {
      video: { url: videoUrl },
      caption: `‚¨§‚îÄ‚îÄ‚îÄ„Äî *üéûÔ∏è XVIDEOS RESULT* „Äï‚îÄ‚îÄ‚îÄ‚¨§

*üé¨ Title:* ${title}
*üë©‚Äçüé§ Artist:* ${artist || "Unknown"}
*‚è± Duration:* ${duration}
*üîó Source:* ${url}

> ¬© WhiteShadow-MD üî•`,
      thumbnail: thumb
    }, { quoted: mek });

  } catch (e) {
    console.error(e);
    return m.reply("‚ö†Ô∏è *Something went wrong while fetching Xvideos video!* üò¢");
  }
});
